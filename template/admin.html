{{template "header" .Meta}}
<div class="container mx-auto py-4">
    <h2 class="text-2xl">API Keys</h2>
    {{if .APIKeys}}
        <table class="table-auto">
            <thead>
            <tr>
                <th class="px-1 py-1">API Key</th>
                <th class="px-1 py-1">Label</th>
                <th class="px-1 py-1">Admin</th>
            </tr>
            </thead>
            <tbody>
            {{range .APIKeys}}
                <tr>
                    <td class="border px-1 py-1">{{.Key}}</td>
                    <td class="border px-1 py-1">{{.Label}}</td>
                    <td class="border px-1 py-1">{{if .Admin}}✔{{end}}</td>
                </tr>
            {{end}}
            </tbody>
        </table>
    {{else}}
        <p>WARNING: No api keys registered.</p>
    {{end}}
    <form method="post" action="/new-key" class="w-full max-w-sm my-2">
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-key" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    Key
                </label>
            </div>
            <div class="md:w-2/3">
                <input type="text" id="input-key" name="key"
                       class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"/>
            </div>
        </div>
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-label" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    Label
                </label>
            </div>
            <div class="md:w-2/3">
                <input type="text" id="input-label" name="label"
                       class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"/>
            </div>
        </div>
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3"></div>
            <label for="input-admin" class="md:w-2/3 block text-gray-500 font-bold">
                <input type="checkbox" id="input-admin" name="admin" value="yes" class="mr-2 leading-tight"/>
                <span class="text-sm">
                    Admin
                </span>
            </label>
        </div>
        <div class="md:flex md:items-center">
            <div class="md:w-1/3"></div>
            <div class="md:w-2/3">
                <input type="submit"
                       class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow"/>
            </div>
        </div>
    </form>
    <h2 class="text-2xl">SSH Servers</h2>
    {{if .SSHServers}}
        <table class="table-auto">
            <thead>
            <tr>
                <th class="px-1 py-1">Host</th>
                <th class="px-1 py-1">Port</th>
                <th class="px-1 py-1">User</th>
                <th class="px-1 py-1">Key</th>
                <th class="px-1 py-1">Password</th>
            </tr>
            </thead>
            <tbody>
            {{range .SSHServers}}
                <tr>
                    <td class="border px-1 py-1">{{.Host}}</td>
                    <td class="border px-1 py-1">{{.Port}}</td>
                    <td class="border px-1 py-1">{{.User}}</td>
                    <td class="border px-1 py-1">{{if .Key}}✔{{end}}</td>
                    <td class="border px-1 py-1">{{if .Password}}✔{{end}}</td>
                </tr>
            {{end}}
            </tbody>
        </table>
    {{else}}
        <p>WARNING: No ssh servers registered.</p>
    {{end}}
    <form method="post" action="/new-server" class="w-full max-w-sm my-2">
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-host" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    Host
                </label>
            </div>
            <div class="md:w-2/3">
                <input type="text" id="input-host" name="host"
                       class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"/>
            </div>
        </div>
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-port" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    Port
                </label>
            </div>
            <div class="md:w-2/3">
                <input type="number" min="1" max="65535" id="input-port" name="port" value="22"
                       class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"/>
            </div>
        </div>
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-user" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    User
                </label>
            </div>
            <div class="md:w-2/3">
                <input type="text" id="input-user" name="user"
                       class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"/>
            </div>
        </div>
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-key" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    Key
                </label>
            </div>
            <div class="md:w-2/3">
                <textarea id="input-key" name="key"
                          class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"></textarea>
            </div>
        </div>
        <div class="md:flex md:items-center mb-3">
            <div class="md:w-1/3">
                <label for="input-password" class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4">
                    Password
                </label>
            </div>
            <div class="md:w-2/3">
                <input type="password" id="input-password" name="password"
                       class="bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-blue-500"/>
            </div>
        </div>
        <div class="md:flex md:items-center">
            <div class="md:w-1/3"></div>
            <div class="md:w-2/3">
                <input type="submit"
                       class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded shadow"/>
            </div>
        </div>
        <p>Either key or password is required.</p>
    </form>
</div>
{{template "footer" .Meta}}
